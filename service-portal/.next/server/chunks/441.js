exports.id=441,exports.ids=[441],exports.modules={5956:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(37413),s=t(75986),i=t(4536),d=t.n(i);function n({breadcrumbs:e}){return(0,r.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-6 block",children:(0,r.jsx)("ol",{className:(0,s.$)("flex text-xl md:text-2xl"),children:e.map((a,t)=>(0,r.jsxs)("li",{"aria-current":a.active,className:(0,s.$)(a.active?"text-white-900":"text-white-500"),children:[(0,r.jsx)(d(),{href:a.href,children:a.label}),t<e.length-1?(0,r.jsx)("span",{className:"mx-3 inline-block",children:"/"}):null]},a.href))})})}},12566:(e,a,t)=>{"use strict";t.r(a),t.d(a,{"000f46e070954fed3f5c347b7b48807b80145d4224":()=>s.EN,"001c561627fe508607d77a86c34e2a4d1d46fe8830":()=>s.hU,"0029e1a7167022460839b9935b727b2f899c1324a9":()=>s.WS,"005c7082822306d8062fdd8e596b0f34d110ad40ea":()=>s.rQ,"005e89b7d391992ed418967c8af732d7ab1056b50d":()=>s.zP,"006c155aef79290e876c92fd47b0ea9370f4867909":()=>s.kN,"00c546a4b9b272045f8986ae677e6535be0a9c8ec2":()=>s.q8,"00da9f1737496d86da8e5241b8614fc96b392bb135":()=>s.Dd,"00f1d0da0f79f3f2afb2d1ff44c988659496309405":()=>r.x,"407a7f7a6b0d11c4cb4ba7cde7825e7d7ae63406f5":()=>s.e6,"407af6ccf82383b25b7460922d095919c258421f25":()=>s.e4,"40d65b77cac4e4d906b1ba4fae2a8b15d6f31083f6":()=>s.n2,"40f83824b88762207e62254de6267b092efaa86250":()=>s.Dq,"60656fa31c0bced930ce6231a0a11d7534a41801cb":()=>s.H$});var r=t(69433),s=t(34652)},16236:(e,a,t)=>{"use strict";t.d(a,{default:()=>f});var r=t(60687),s=t(85814),i=t.n(s),d=t(16189),n=t(49384),c=t(20816),l=t(65963),o=t(93635);function f({menuLinks:e}){let a=(0,d.usePathname)();return(0,r.jsx)(r.Fragment,{children:e.map(e=>{let t=e.icon;return(0,r.jsxs)(i(),{href:e.href,className:(0,n.A)("text-gray-900 flex h-[48px] grow items-center justify-center gap-2 rounded-md bg-gray-50 p-3 text-sm font-medium hover:bg-sky-100 hover:text-blue-600 md:flex-none md:justify-start md:p-2 md:px-3",{"bg-sky-100 text-blue-600":a===e.href}),children:[(0,r.jsx)(c.A,{className:(0,n.A)("w-6",{hidden:"HomeIcon"!=t})}),(0,r.jsx)(l.A,{className:(0,n.A)("w-6",{hidden:"DocumentDuplicateIcon"!=t})}),(0,r.jsx)(o.A,{className:(0,n.A)("w-6",{hidden:"UserGroupIcon"!=t})}),(0,r.jsx)("p",{className:"hidden md:block",children:e.name})]},e.name)})})}},33178:(e,a,t)=>{"use strict";t.d(a,{j2:()=>o,Jv:()=>f});var r=t(40844),s=t(27314),i=t(5486),d=t.n(i),n=t(65699),c=t(93468);async function l(e){try{return(await c.A.user.findMany({where:{email:e,deletedAt:null}}))[0]}catch(e){throw console.error("Failed to fetch user:",e),Error("Failed to fetch user.")}}let{auth:o,signIn:f,signOut:u}=(0,r.Ay)({pages:{signIn:""},providers:[],callbacks:{authorized({auth:e,request:{nextUrl:a}}){let t=!!e?.user;return a.pathname.startsWith("/dashboard")?!!t:!t||Response.redirect(new URL("/dashboard",a))}},providers:[(0,s.A)({async authorize(e){let a=n.Ik({email:n.Yj(),password:n.Yj().min(6)}).safeParse(e);if(a.success){let{email:e,password:t}=a.data,r=await l(e);if(!r)return null;if(await d().compare(t,r.password))return r}return console.log("Invalid credentials. Hashes don't match."),null}})]})},52527:(e,a,t)=>{Promise.resolve().then(t.bind(t,69718)),Promise.resolve().then(t.t.bind(t,4536,23))},60333:(e,a,t)=>{"use strict";t.r(a),t.d(a,{"400f5b238a9a637c35db6c7c8a154fa5c77553d7ab":()=>P,"40517a1046e621fdcbc50372c75300d907b8411775":()=>N,"6055e81affa1d7a6f8d82136666f3b8b1a9c9e0c61":()=>y,"607d7b6e426cf6b2479e75b7265323cc18d61a49cd":()=>I,"60d99fa015b6a69e427bac6d26a1ea3c717f72046a":()=>j,"60de78c93da328a0fed9830ebcf3cb732f187827c2":()=>E,"70c60e398b24917feb2612ac718ce38c8dc4a94393":()=>A,"70eff7ea2aed15b44c20f2e15b28e92c760a9ccabd":()=>k});var r=t(91199);t(42087);var s=t(65699),i=t(5486),d=t.n(i),n=t(93468),c=t(7944),l=t(90141),o=t(33178),f=t(40844),u=t(79748),m=t(33873),b=t.n(m),h=t(33331);let g=s.Ik({id:s.Yj(),userId:s.Yj({invalid_type_error:"Please select a user."}),title:s.Yj(),details:s.Yj({message:"Please enter details about your complaint / request."}),tags:s.Yj(),name:s.Yj({message:"Please enter category name."}),description:s.Yj({message:"Please enter category-details."}),status:s.k5(["pending","resolved"],{invalid_type_error:"Please select a ticket status."}),date:s.Yj(),password:s.Yj(),email:s.Yj(),roleId:s.ai()}),p=g.pick({userId:!0,title:!0,details:!0,tags:!0,status:!0}),x=g.pick({name:!0,description:!0}),w=g.pick({name:!0,description:!0}),v=g.pick({userId:!0,title:!0,details:!0,tags:!0,status:!0});async function y(e,a){let t=p.safeParse({userId:a.get("userId"),title:a.get("title"),details:a.get("details"),tags:a.get("tags"),status:a.get("status")});if(!t.success)return{errors:t.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Ticket."};let{userId:r,title:s,details:i,tags:d,status:o}=t.data,f=new Date,m=a.getAll("attachments"),h=Array.isArray(m)?await Promise.all(m?.map(async e=>{let a={userId:r,fileName:e.name.replaceAll(" ","_"),size:e.size,type:"image",contentType:e.type};return await u.writeFile(b().join(process.cwd(),"public/file_uploads/ticket_images",a.fileName),Buffer.from(await e?.arrayBuffer())),a})):[];try{await n.A.ticket.create({data:{userId:r,title:s,details:i,tags:d,status:o,date:f,attachments:{create:h}}})}catch(e){return{message:"Database Error: Failed to Create Ticket.",error:e instanceof Error?e.message:"Unknown error"}}(0,c.revalidatePath)("/dashboard/tickets"),(0,l.redirect)("/dashboard/tickets")}async function j(e,a){let t=x.safeParse({name:a.get("name"),description:a.get("description")});if(!t.success)return{errors:t.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Category."};let{name:r,description:s}=t.data;try{await n.A.category.create({data:{name:r,description:s,users:{connect:Array.from(a.getAll("users")).map(e=>({id:e}))}}})}catch(e){return{message:"Database Error: Failed to Create Category.",error:e instanceof Error?e.message:"Unknown error"}}(0,c.revalidatePath)("/dashboard/categories"),(0,l.redirect)("/dashboard/categories")}async function A(e,a,t){let r=w.safeParse({name:t.get("name"),description:t.get("description")});if(!r.success)return{errors:r.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Category."};let{name:s,description:i}=r.data;try{await n.A.category.update({where:{id:e},data:{name:s,description:i,users:{set:Array.from(t.getAll("users")).map(e=>({id:e}))}}})}catch(e){return{message:"Database Error: Failed to Update Category.",error:e instanceof Error?e.message:"Unknown error"}}(0,c.revalidatePath)("/dashboard/categories"),(0,l.redirect)("/dashboard/categories")}async function k(e,a,t){let r=v.safeParse({userId:t.get("userId"),title:t.get("title"),details:t.get("details"),tags:t.get("tags"),status:t.get("status")});if(!r.success)return{errors:r.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Ticket."};let{userId:s,title:i,details:d,tags:o,status:f}=r.data;try{await n.A.ticket.update({where:{id:e},data:{userId:s,title:i,details:d,tags:o,status:f}})}catch(e){return{message:"Database Error: Failed to Update Ticket.",error:e instanceof Error?e.message:"Unknown error"}}(0,c.revalidatePath)("/dashboard/tickets"),(0,l.redirect)("/dashboard/tickets")}async function P(e){await n.A.ticket.update({where:{id:e},data:{deletedAt:new Date().toISOString().split("T")[0]}}),(0,c.revalidatePath)("/dashboard/tickets")}async function N(e){await n.A.category.update({where:{id:e},data:{deletedAt:new Date().toISOString().split("T")[0]}}),(0,c.revalidatePath)("/dashboard/categories")}async function I(e,a){try{await (0,o.Jv)("credentials",a),(0,c.revalidatePath)("/dashboard"),(0,l.redirect)("/dashboard")}catch(e){if(e instanceof f.lR||e instanceof f.xz){if("CredentialsSignin"===e.type)return"Invalid credentials.";return"Something went wrong."}if(e instanceof f.Ay||e instanceof f.Ay||e instanceof f.Ay||e instanceof f.Ay||e instanceof Error)return(0,c.revalidatePath)("/dashboard"),(0,l.redirect)("/dashboard"),"Invalid credentials. Please try again.";throw e}}async function E(e,a){try{await n.A.user.create({data:{name:a.get("fullName"),email:a.get("email"),password:await d().hash(a.get("password"),10),roleId:parseInt(a.get("userRole"))}})}catch(e){if(e instanceof Error)return e.message;return"Failed to register user."}await I(e,a),(0,c.revalidatePath)("/dashboard"),(0,l.redirect)("/dashboard")}(0,h.D)([y,j,A,k,P,N,I,E]),(0,r.A)(y,"6055e81affa1d7a6f8d82136666f3b8b1a9c9e0c61",null),(0,r.A)(j,"60d99fa015b6a69e427bac6d26a1ea3c717f72046a",null),(0,r.A)(A,"70c60e398b24917feb2612ac718ce38c8dc4a94393",null),(0,r.A)(k,"70eff7ea2aed15b44c20f2e15b28e92c760a9ccabd",null),(0,r.A)(P,"400f5b238a9a637c35db6c7c8a154fa5c77553d7ab",null),(0,r.A)(N,"40517a1046e621fdcbc50372c75300d907b8411775",null),(0,r.A)(I,"607d7b6e426cf6b2479e75b7265323cc18d61a49cd",null),(0,r.A)(E,"60de78c93da328a0fed9830ebcf3cb732f187827c2",null)},60775:(e,a,t)=>{Promise.resolve().then(t.bind(t,16236)),Promise.resolve().then(t.t.bind(t,85814,23))},61245:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(43210);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},69433:(e,a,t)=>{"use strict";t.d(a,{A:()=>u,x:()=>f});var r=t(37413),s=t(67218);t(79130);var i=t(4536),d=t.n(i),n=t(69718),c=t(32178),l=t(71612),o=t(34652);let f=async function(){await (0,l.CI)({redirectTo:"/"})};async function u(){let e=await (0,o.rQ)(),a=await (0,o.q8)();return(0,r.jsxs)("div",{className:"text-gray-900 flex h-full flex-col px-3 py-4 md:px-2",children:[(0,r.jsx)(d(),{className:"mb-2 flex h-20 items-end justify-start rounded-md bg-blue-600 p-4 md:h-20",href:"/",children:(0,r.jsx)("div",{className:"w-32 text-white md:w-40",children:(0,r.jsxs)("h6",{className:"text-l font-bold md:text-l",children:["Hi ",e?.name,", (",e?.role.name,")"]})})}),(0,r.jsxs)("div",{className:"text-gray-900 flex grow flex-row justify-between space-x-2 md:flex-col md:space-x-0 md:space-y-2",children:[(0,r.jsx)(n.default,{menuLinks:a}),(0,r.jsx)("div",{className:"hidden h-auto w-full grow rounded-md bg-gray-50 md:block"}),(0,r.jsx)("form",{action:(0,s.A)(f,"00f1d0da0f79f3f2afb2d1ff44c988659496309405",null),children:(0,r.jsxs)("button",{className:"flex h-[48px] w-full grow items-center justify-center gap-2 rounded-md bg-gray-50 p-3 text-sm font-medium hover:bg-sky-100 hover:text-blue-600 md:flex-none md:justify-start md:p-2 md:px-3",children:[(0,r.jsx)(c.A,{className:"w-6"}),(0,r.jsx)("div",{className:"hidden md:block",children:"Sign Out"})]})})]})]})}},69718:(e,a,t)=>{"use strict";t.d(a,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\georg\\\\Documents\\\\Projects\\\\computing-project\\\\computing-project\\\\service-portal\\\\app\\\\ui-components\\\\dashboard\\\\nav-links.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\georg\\Documents\\Projects\\computing-project\\computing-project\\service-portal\\app\\ui-components\\dashboard\\nav-links.tsx","default")},75986:(e,a,t)=>{"use strict";function r(){for(var e,a,t=0,r="",s=arguments.length;t<s;t++)(e=arguments[t])&&(a=function e(a){var t,r,s="";if("string"==typeof a||"number"==typeof a)s+=a;else if("object"==typeof a){if(Array.isArray(a)){var i=a.length;for(t=0;t<i;t++)a[t]&&(r=e(a[t]))&&(s&&(s+=" "),s+=r)}else for(r in a)a[r]&&(s&&(s+=" "),s+=r)}return s}(e))&&(r&&(r+=" "),r+=a);return r}t.d(a,{$:()=>r,A:()=>s});let s=r},77504:(e,a,t)=>{"use strict";t.d(a,{$:()=>i});var r=t(60687),s=t(49384);function i({children:e,className:a,...t}){return(0,r.jsx)("button",{...t,className:(0,s.A)("flex h-10 items-center rounded-lg bg-blue-500 px-4 text-sm font-medium text-white transition-colors hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 active:bg-blue-600 aria-disabled:cursor-not-allowed aria-disabled:opacity-50",a),children:e})}},83188:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(43210);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},83249:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d,metadata:()=>i});var r=t(37413),s=t(69433);let i={title:{template:"%s | A.I-enabled service-request App",default:"Dashboard"}};function d({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen flex-col md:flex-row md:overflow-hidden",children:[(0,r.jsx)("div",{className:"w-full flex-none md:w-64",children:(0,r.jsx)(s.A,{})}),(0,r.jsx)("div",{className:"grow p-6 md:overflow-y-auto md:p-12",children:e})]})}},93468:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(96330);let s=globalThis.prisma||new r.PrismaClient}};