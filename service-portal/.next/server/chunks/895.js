exports.id=895,exports.ids=[895],exports.modules={10328:(e,a,t)=>{"use strict";t.r(a),t.d(a,{"000f46e070954fed3f5c347b7b48807b80145d4224":()=>s.EN,"001c561627fe508607d77a86c34e2a4d1d46fe8830":()=>s.hU,"0029e1a7167022460839b9935b727b2f899c1324a9":()=>s.WS,"005c7082822306d8062fdd8e596b0f34d110ad40ea":()=>s.rQ,"005e89b7d391992ed418967c8af732d7ab1056b50d":()=>s.zP,"006c155aef79290e876c92fd47b0ea9370f4867909":()=>s.kN,"00c546a4b9b272045f8986ae677e6535be0a9c8ec2":()=>s.q8,"00da9f1737496d86da8e5241b8614fc96b392bb135":()=>s.Dd,"00f1d0da0f79f3f2afb2d1ff44c988659496309405":()=>r.x,"400f5b238a9a637c35db6c7c8a154fa5c77553d7ab":()=>d.cC,"40517a1046e621fdcbc50372c75300d907b8411775":()=>d.K7,"407a7f7a6b0d11c4cb4ba7cde7825e7d7ae63406f5":()=>s.e6,"407af6ccf82383b25b7460922d095919c258421f25":()=>s.e4,"40d65b77cac4e4d906b1ba4fae2a8b15d6f31083f6":()=>s.n2,"40f83824b88762207e62254de6267b092efaa86250":()=>s.Dq,"6055e81affa1d7a6f8d82136666f3b8b1a9c9e0c61":()=>d.Z2,"60656fa31c0bced930ce6231a0a11d7534a41801cb":()=>s.H$,"607d7b6e426cf6b2479e75b7265323cc18d61a49cd":()=>d.QF,"60d99fa015b6a69e427bac6d26a1ea3c717f72046a":()=>d.zZ,"60de78c93da328a0fed9830ebcf3cb732f187827c2":()=>d.DY,"70c60e398b24917feb2612ac718ce38c8dc4a94393":()=>d.st,"70eff7ea2aed15b44c20f2e15b28e92c760a9ccabd":()=>d.EZ});var r=t(69433),s=t(34652),d=t(91485)},16236:(e,a,t)=>{"use strict";t.d(a,{default:()=>f});var r=t(60687),s=t(85814),d=t.n(s),c=t(16189),i=t(49384),n=t(20816),o=t(65963),l=t(93635);function f({menuLinks:e}){let a=(0,c.usePathname)();return(0,r.jsx)(r.Fragment,{children:e.map(e=>{let t=e.icon;return(0,r.jsxs)(d(),{href:e.href,className:(0,i.A)("text-gray-900 flex h-[48px] grow items-center justify-center gap-2 rounded-md bg-gray-50 p-3 text-sm font-medium hover:bg-sky-100 hover:text-blue-600 md:flex-none md:justify-start md:p-2 md:px-3",{"bg-sky-100 text-blue-600":a===e.href}),children:[(0,r.jsx)(n.A,{className:(0,i.A)("w-6",{hidden:"HomeIcon"!=t})}),(0,r.jsx)(o.A,{className:(0,i.A)("w-6",{hidden:"DocumentDuplicateIcon"!=t})}),(0,r.jsx)(l.A,{className:(0,i.A)("w-6",{hidden:"UserGroupIcon"!=t})}),(0,r.jsx)("p",{className:"hidden md:block",children:e.name})]},e.name)})})}},52527:(e,a,t)=>{Promise.resolve().then(t.bind(t,69718)),Promise.resolve().then(t.t.bind(t,4536,23))},60775:(e,a,t)=>{Promise.resolve().then(t.bind(t,16236)),Promise.resolve().then(t.t.bind(t,85814,23))},69433:(e,a,t)=>{"use strict";t.d(a,{A:()=>u,x:()=>f});var r=t(37413),s=t(67218);t(79130);var d=t(4536),c=t.n(d),i=t(69718),n=t(32178),o=t(71612),l=t(34652);let f=async function(){await (0,o.CI)({redirectTo:"/"})};async function u(){let e=await (0,l.rQ)(),a=await (0,l.q8)();return(0,r.jsxs)("div",{className:"text-gray-900 flex h-full flex-col px-3 py-4 md:px-2",children:[(0,r.jsx)(c(),{className:"mb-2 flex h-20 items-end justify-start rounded-md bg-blue-600 p-4 md:h-20",href:"/",children:(0,r.jsx)("div",{className:"w-32 text-white md:w-40",children:(0,r.jsxs)("h6",{className:"text-l font-bold md:text-l",children:["Hi ",e?.name,", (",e?.role.name,")"]})})}),(0,r.jsxs)("div",{className:"text-gray-900 flex grow flex-row justify-between space-x-2 md:flex-col md:space-x-0 md:space-y-2",children:[(0,r.jsx)(i.default,{menuLinks:a}),(0,r.jsx)("div",{className:"hidden h-auto w-full grow rounded-md bg-gray-50 md:block"}),(0,r.jsx)("form",{action:(0,s.A)(f,"00f1d0da0f79f3f2afb2d1ff44c988659496309405",null),children:(0,r.jsxs)("button",{className:"flex h-[48px] w-full grow items-center justify-center gap-2 rounded-md bg-gray-50 p-3 text-sm font-medium hover:bg-sky-100 hover:text-blue-600 md:flex-none md:justify-start md:p-2 md:px-3",children:[(0,r.jsx)(n.A,{className:"w-6"}),(0,r.jsx)("div",{className:"hidden md:block",children:"Sign Out"})]})})]})]})}},69718:(e,a,t)=>{"use strict";t.d(a,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\georg\\\\Documents\\\\Projects\\\\computing-project\\\\computing-project\\\\service-portal\\\\app\\\\ui-components\\\\dashboard\\\\nav-links.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\georg\\Documents\\Projects\\computing-project\\computing-project\\service-portal\\app\\ui-components\\dashboard\\nav-links.tsx","default")},83249:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c,metadata:()=>d});var r=t(37413),s=t(69433);let d={title:{template:"%s | A.I-enabled service-request App",default:"Dashboard"}};function c({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen flex-col md:flex-row md:overflow-hidden",children:[(0,r.jsx)("div",{className:"w-full flex-none md:w-64",children:(0,r.jsx)(s.A,{})}),(0,r.jsx)("div",{className:"grow p-6 md:overflow-y-auto md:p-12",children:e})]})}},91485:(e,a,t)=>{"use strict";t.d(a,{DY:()=>C,EZ:()=>k,K7:()=>I,QF:()=>N,Z2:()=>v,cC:()=>P,st:()=>A,zZ:()=>j});var r=t(67218);t(79130);var s=t(10209),d=t(5486),c=t.n(d),i=t(26195),n=t(62351),o=t(39916),l=t(71612),f=t(13258),u=t(79748),m=t(33873),b=t.n(m),g=t(17478);let p=s.Ik({id:s.Yj(),userId:s.Yj({invalid_type_error:"Please select a user."}),title:s.Yj(),details:s.Yj({message:"Please enter details about your complaint / request."}),tags:s.Yj(),name:s.Yj({message:"Please enter category name."}),description:s.Yj({message:"Please enter category-details."}),status:s.k5(["pending","resolved"],{invalid_type_error:"Please select a ticket status."}),date:s.Yj(),password:s.Yj(),email:s.Yj(),roleId:s.ai()}),h=p.pick({userId:!0,title:!0,details:!0,tags:!0,status:!0}),x=p.pick({name:!0,description:!0}),y=p.pick({name:!0,description:!0}),w=p.pick({userId:!0,title:!0,details:!0,tags:!0,status:!0});async function v(e,a){let t=h.safeParse({userId:a.get("userId"),title:a.get("title"),details:a.get("details"),tags:a.get("tags"),status:a.get("status")});if(!t.success)return{errors:t.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Ticket."};let{userId:r,title:s,details:d,tags:c,status:l}=t.data,f=new Date,m=a.getAll("attachments"),g=Array.isArray(m)?await Promise.all(m?.map(async e=>{let a={userId:r,fileName:e.name.replaceAll(" ","_"),size:e.size,type:"image",contentType:e.type};return await u.writeFile(b().join(process.cwd(),"public/file_uploads/ticket_images",a.fileName),Buffer.from(await e?.arrayBuffer())),a})):[];try{await i.A.ticket.create({data:{userId:r,title:s,details:d,tags:c,status:l,date:f,attachments:{create:g}}})}catch(e){return{message:"Database Error: Failed to Create Ticket.",error:e instanceof Error?e.message:"Unknown error"}}(0,n.revalidatePath)("/dashboard/tickets"),(0,o.redirect)("/dashboard/tickets")}async function j(e,a){let t=x.safeParse({name:a.get("name"),description:a.get("description")});if(!t.success)return{errors:t.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Category."};let{name:r,description:s}=t.data;try{await i.A.category.create({data:{name:r,description:s,users:{connect:Array.from(a.getAll("users")).map(e=>({id:e}))}}})}catch(e){return{message:"Database Error: Failed to Create Category.",error:e instanceof Error?e.message:"Unknown error"}}(0,n.revalidatePath)("/dashboard/categories"),(0,o.redirect)("/dashboard/categories")}async function A(e,a,t){let r=y.safeParse({name:t.get("name"),description:t.get("description")});if(!r.success)return{errors:r.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Category."};let{name:s,description:d}=r.data;try{await i.A.category.update({where:{id:e},data:{name:s,description:d,users:{set:Array.from(t.getAll("users")).map(e=>({id:e}))}}})}catch(e){return{message:"Database Error: Failed to Update Category.",error:e instanceof Error?e.message:"Unknown error"}}(0,n.revalidatePath)("/dashboard/categories"),(0,o.redirect)("/dashboard/categories")}async function k(e,a,t){let r=w.safeParse({userId:t.get("userId"),title:t.get("title"),details:t.get("details"),tags:t.get("tags"),status:t.get("status")});if(!r.success)return{errors:r.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Ticket."};let{userId:s,title:d,details:c,tags:l,status:f}=r.data;try{await i.A.ticket.update({where:{id:e},data:{userId:s,title:d,details:c,tags:l,status:f}})}catch(e){return{message:"Database Error: Failed to Update Ticket.",error:e instanceof Error?e.message:"Unknown error"}}(0,n.revalidatePath)("/dashboard/tickets"),(0,o.redirect)("/dashboard/tickets")}async function P(e){await i.A.ticket.update({where:{id:e},data:{deletedAt:new Date().toISOString().split("T")[0]}}),(0,n.revalidatePath)("/dashboard/tickets")}async function I(e){await i.A.category.update({where:{id:e},data:{deletedAt:new Date().toISOString().split("T")[0]}}),(0,n.revalidatePath)("/dashboard/categories")}async function N(e,a){try{await (0,l.Jv)("credentials",a),(0,n.revalidatePath)("/dashboard"),(0,o.redirect)("/dashboard")}catch(e){if(e instanceof f.lR||e instanceof f.xz){if("CredentialsSignin"===e.type)return"Invalid credentials.";return"Something went wrong."}if(e instanceof f.Ay||e instanceof f.Ay||e instanceof f.Ay||e instanceof f.Ay||e instanceof Error)return(0,n.revalidatePath)("/dashboard"),(0,o.redirect)("/dashboard"),"Invalid credentials. Please try again.";throw e}}async function C(e,a){try{await i.A.user.create({data:{name:a.get("fullName"),email:a.get("email"),password:await c().hash(a.get("password"),10),roleId:parseInt(a.get("userRole"))}})}catch(e){if(e instanceof Error)return e.message;return"Failed to register user."}await N(e,a),(0,n.revalidatePath)("/dashboard"),(0,o.redirect)("/dashboard")}(0,g.D)([v,j,A,k,P,I,N,C]),(0,r.A)(v,"6055e81affa1d7a6f8d82136666f3b8b1a9c9e0c61",null),(0,r.A)(j,"60d99fa015b6a69e427bac6d26a1ea3c717f72046a",null),(0,r.A)(A,"70c60e398b24917feb2612ac718ce38c8dc4a94393",null),(0,r.A)(k,"70eff7ea2aed15b44c20f2e15b28e92c760a9ccabd",null),(0,r.A)(P,"400f5b238a9a637c35db6c7c8a154fa5c77553d7ab",null),(0,r.A)(I,"40517a1046e621fdcbc50372c75300d907b8411775",null),(0,r.A)(N,"607d7b6e426cf6b2479e75b7265323cc18d61a49cd",null),(0,r.A)(C,"60de78c93da328a0fed9830ebcf3cb732f187827c2",null)}};